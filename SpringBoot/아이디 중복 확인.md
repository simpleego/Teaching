#  아이디 중복 확인 
Spring Boot, MySQL, Thymeleaf, 그리고 JdbcTemplate을 활용한 간단한 회원가입 + 아이디 중복 체크 예제를 만들어볼게요. 핵심은 사용자가 입력한 아이디가 DB에 이미 존재하는지 확인하고, 존재하면 가입을 막는 로직이죠.

---

## 🧱 프로젝트 구성

- **Backend**: Spring Boot + JdbcTemplate
- **Frontend**: Thymeleaf
- **Database**: MySQL

---

## 📁 디렉토리 구조

```
src/
 └── main/
     ├── java/
     │    └── com.example.signup/
     │         ├── controller/
     │         │     └── UserController.java
     │         ├── repository/
     │         │     └── UserRepository.java
     │         ├── model/
     │         │     └── User.java
     │         └── SignupApplication.java
     └── resources/
          ├── templates/
          │     └── signup.html
          └── application.yml
```

---

## 🧑‍💻 1. User 모델

```java
package com.example.signup.model;

public class User {
    private String username;
    private String password;

    // Getters & Setters
}
```

---

## 🗃️ 2. UserRepository (JdbcTemplate 사용)

```java
package com.example.signup.repository;

import com.example.signup.model.User;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class UserRepository {

    private final JdbcTemplate jdbcTemplate;

    public UserRepository(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public boolean existsByUsername(String username) {
        String sql = "SELECT COUNT(*) FROM users WHERE username = ?";
        Integer count = jdbcTemplate.queryForObject(sql, Integer.class, username);
        return count != null && count > 0;
    }

    public void save(User user) {
        String sql = "INSERT INTO users (username, password) VALUES (?, ?)";
        jdbcTemplate.update(sql, user.getUsername(), user.getPassword());
    }
}
```

---

## 🎮 3. UserController

```java
package com.example.signup.controller;

import com.example.signup.model.User;
import com.example.signup.repository.UserRepository;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;

@Controller
public class UserController {

    private final UserRepository userRepository;

    public UserController(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @GetMapping("/signup")
    public String signupForm(Model model) {
        model.addAttribute("user", new User());
        return "signup";
    }

    @PostMapping("/signup")
    public String signupSubmit(@ModelAttribute User user, Model model) {
        if (userRepository.existsByUsername(user.getUsername())) {
            model.addAttribute("error", "이미 존재하는 아이디입니다.");
            return "signup";
        }

        userRepository.save(user);
        model.addAttribute("message", "회원가입 성공!");
        return "signup";
    }
}
```

---

## 🖼️ 4. signup.html (Thymeleaf)

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>회원가입</title>
</head>
<body>
<h2>회원가입</h2>

<form th:action="@{/signup}" th:object="${user}" method="post">
    <label>아이디: <input type="text" th:field="*{username}" /></label><br/>
    <label>비밀번호: <input type="password" th:field="*{password}" /></label><br/>
    <button type="submit">가입하기</button>
</form>

<p th:if="${error}" th:text="${error}" style="color:red;"></p>
<p th:if="${message}" th:text="${message}" style="color:green;"></p>
</body>
</html>
```

---

## ⚙️ 5. application.yml

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/testdb
    username: root
    password: yourpassword
    driver-class-name: com.mysql.cj.jdbc.Driver
  thymeleaf:
    cache: false
```

---

## 🧾 6. MySQL 테이블 생성

```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL
);
```

---

이제 서버를 실행하고 `/signup` 페이지로 접속하면, 아이디 중복 체크가 포함된 회원가입 기능이 작동합니다. 혹시 이걸 확장해서 Ajax로 실시간 체크하거나, 비밀번호 암호화까지 하고 싶다면 언제든지 말해줘요!
