# ìŠ¤íŠ¸ë¦¬ë°ì„œë²„ êµ¬ì¶•
> **ë“œë¡ (ë˜ëŠ” ë“œë¡ ì— ì—°ê²°ëœ ì—£ì§€ ë””ë°”ì´ìŠ¤: ë¼ì¦ˆë² ë¦¬íŒŒì´/ì ¯ìŠ¨ ë“±)** ë¡œë¶€í„° ì˜ìƒì„ ë°›ì•„ **Flask ê¸°ë°˜ ìŠ¤íŠ¸ë¦¬ë° ì„œë²„**ë¡œ ì¤‘ê³„í•˜ëŠ”
> **ê°€ì¥ ë‹¨ìˆœí•œ êµ¬ì¡°**ì™€ **ì‹¤í–‰ ê°€ëŠ¥í•œ ì˜ˆì œ ì½”ë“œ**
---

## 1. ì „ì²´ ì•„í‚¤í…ì²˜ (ìµœì†Œ êµ¬ì„±)

```
[ë“œë¡ /ì—£ì§€ ë””ë°”ì´ìŠ¤]
 â””â”€ OpenCVë¡œ ì¹´ë©”ë¼ ìº¡ì²˜
 â””â”€ HTTP(MJPEG) ìŠ¤íŠ¸ë¦¼ ì†¡ì¶œ
        â†“
[Flask ìŠ¤íŠ¸ë¦¬ë° ì„œë²„]
 â””â”€ ì˜ìƒ ìˆ˜ì‹ 
 â””â”€ ì›¹ ë¸Œë¼ìš°ì €ë¡œ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì œê³µ
```

â€» ì‹¤ì œ ë“œë¡  SDK(DJI, PX4 ë“±) ì—†ì´ **USB ì¹´ë©”ë¼/RTSP** ê¸°ì¤€ìœ¼ë¡œ êµ¬ì„±
â€» MJPEG ë°©ì‹ â†’ ê°€ì¥ ë‹¨ìˆœí•˜ê³  ì•ˆì •ì 

---

## 2. í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

```bash
pip install flask opencv-python
```

---

## 3. Flask ìŠ¤íŠ¸ë¦¬ë° ì„œë²„ (í•µì‹¬ ì½”ë“œ)

### ğŸ“Œ server.py (ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë° ì„œë²„)

```python
from flask import Flask, Response
import cv2

app = Flask(__name__)

# ì¹´ë©”ë¼ ì†ŒìŠ¤
# 0 : ë¡œì»¬ ì›¹ìº 
# RTSP ì˜ˆ: "rtsp://drone_ip:8554/stream"
cap = cv2.VideoCapture(0)

def generate_frames():
    while True:
        success, frame = cap.read()
        if not success:
            break

        # JPEG ì¸ì½”ë”©
        ret, buffer = cv2.imencode('.jpg', frame)
        frame_bytes = buffer.tobytes()

        # MJPEG ìŠ¤íŠ¸ë¦¬ë° í¬ë§·
        yield (b'--frame\r\n'
               b'Content-Type: image/jpeg\r\n\r\n' +
               frame_bytes + b'\r\n')

@app.route('/video')
def video_feed():
    return Response(generate_frames(),
                    mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/')
def index():
    return """
    <html>
        <head><title>Drone Stream</title></head>
        <body>
            <h2>Drone Video Stream</h2>
            <img src="/video" width="800">
        </body>
    </html>
    """

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, threaded=True)
```

---

## 4. ì‹¤í–‰ ë°©ë²•

```bash
python server.py
```

ë¸Œë¼ìš°ì € ì ‘ì†:

```
http://ì„œë²„IP:5000
```

---

## 5. ë“œë¡  ì¸¡ (ì˜ìƒ ì†¡ì¶œ ê°œë…)

### ë“œë¡ /ì—£ì§€ ë””ë°”ì´ìŠ¤ì—ì„œ RTSP ì†¡ì¶œ ì˜ˆì‹œ

```bash
ffmpeg -f v4l2 -i /dev/video0 -f rtsp rtsp://ì„œë²„IP:8554/stream
```

ì„œë²„ ì½”ë“œì—ì„œ ì¹´ë©”ë¼ ì†ŒìŠ¤ ë³€ê²½:

```python
cap = cv2.VideoCapture("rtsp://ì„œë²„IP:8554/stream")
```

---

## 6. êµ¬ì¡° ìš”ì•½

| êµ¬ì„± ìš”ì†Œ   | ì—­í•        |
| ------- | -------- |
| OpenCV  | ì˜ìƒ ìº¡ì²˜    |
| Flask   | HTTP ì„œë²„  |
| MJPEG   | ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° |
| Browser | ëª¨ë‹ˆí„°ë§     |

---

## 7. í•œê³„ ë° í™•ì¥ ë°©í–¥

### í˜„ì¬ ë°©ì‹ì˜ íŠ¹ì§•

* ë§¤ìš° ë‹¨ìˆœ
* ì§€ì—°(latency) ë‚®ìŒ
* ê°ì²´ ì¸ì‹ ì—°ë™ ì‰¬ì›€

### í™•ì¥ ì‹œ ê¶Œì¥

* ê°ì²´ ë¶„ì„ â†’ YOLO, OpenVINO
* ë©€í‹° ë“œë¡  â†’ Redis + Thread ê´€ë¦¬
* ë³´ì•ˆ â†’ Nginx Reverse Proxy
* ëŒ€ê·œëª¨ â†’ WebRTC / RTMP

---

## 8. ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

ì›í•˜ì‹œë©´ ë‹¤ìŒ ì¤‘ **í•˜ë‚˜ë§Œ ì„ íƒí•´ ì£¼ì‹œë©´ ë°”ë¡œ ì´ì–´ì„œ ì‘ì„±**í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

1. ë“œë¡  â†’ ì„œë²„ ì˜ìƒ ì „ì†¡ ì½”ë“œ (ì†¡ì‹  ì „ìš©)
2. YOLO ê°ì²´ ì¸ì‹ ì—°ë™
3. ë‹¤ì¤‘ ë“œë¡  ìŠ¤íŠ¸ë¦¼ ê´€ë¦¬ êµ¬ì¡°
4. AWS EC2 ë°°í¬ êµ¬ì¡°
5. ì‹¤ì œ DJI / PX4 ì—°ë™ êµ¬ì¡°

**êµìœ¡ìš© / ì‹¤ë¬´ìš© ì¤‘ ì–´ë–¤ ìš©ë„ì¸ì§€** ì•Œë ¤ì£¼ì‹œë©´ ì½”ë“œ ìˆ˜ì¤€ë„ ë§ì¶° ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
