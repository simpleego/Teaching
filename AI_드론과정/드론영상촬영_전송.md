ì•„ë˜ëŠ” **ë“œë¡ (ë˜ëŠ” ë“œë¡ ì— ì—°ê²°ëœ ì—£ì§€ ë””ë°”ì´ìŠ¤)** ê°€ ì¹´ë©”ë¼ë¡œ ì˜ìƒì„ ì´¬ì˜í•˜ê³ , **Flask ì„œë²„ë¡œ ì‹¤ì‹œê°„ í”„ë ˆì„ì„ ì „ì†¡**í•˜ëŠ” **ê°€ì¥ ë‹¨ìˆœí•œ íŒŒì´ì¬ ì½”ë“œ**ì…ë‹ˆë‹¤.
êµ¬ì¡° ì´í•´ì™€ PoCë¥¼ ëª©í‘œë¡œ **HTTP POST + JPEG í”„ë ˆì„ ì „ì†¡ ë°©ì‹**ìœ¼ë¡œ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

---

## 1. ì „ì²´ íë¦„ (ìµœì†Œ êµ¬ì„±)

```
[ë“œë¡ /ì—£ì§€ ë””ë°”ì´ìŠ¤]
 â””â”€ OpenCV ì¹´ë©”ë¼ ìº¡ì²˜
 â””â”€ JPEG ì¸ì½”ë”©
 â””â”€ HTTP POSTë¡œ ì„œë²„ ì „ì†¡
        â†“
[Flask ì„œë²„]
 â””â”€ í”„ë ˆì„ ìˆ˜ì‹ 
 â””â”€ MJPEG ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ë¸Œë¼ìš°ì € ì œê³µ
```

---

## 2. ë“œë¡  ì¸¡ í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

```bash
pip install opencv-python requests
```

---

## 3. ë“œë¡ (ì†¡ì‹ ) ì½”ë“œ

### ğŸ“Œ drone_sender.py

```python
import cv2
import requests

SERVER_URL = "http://ì„œë²„IP:5000/upload"

cap = cv2.VideoCapture(0)  # ë“œë¡  ì¹´ë©”ë¼ ë˜ëŠ” USB ì¹´ë©”ë¼

if not cap.isOpened():
    print("ì¹´ë©”ë¼ë¥¼ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
    exit()

while True:
    ret, frame = cap.read()
    if not ret:
        break

    # JPEG ì¸ì½”ë”©
    ret, buffer = cv2.imencode('.jpg', frame)
    if not ret:
        continue

    # ì„œë²„ë¡œ í”„ë ˆì„ ì „ì†¡
    try:
        response = requests.post(
            SERVER_URL,
            files={'frame': buffer.tobytes()},
            timeout=1
        )
    except requests.exceptions.RequestException:
        print("ì„œë²„ ì „ì†¡ ì‹¤íŒ¨")

cap.release()
```

---

## 4. ì„œë²„(ìˆ˜ì‹  + ìŠ¤íŠ¸ë¦¬ë°) ì½”ë“œ

### ğŸ“Œ server.py

```python
from flask import Flask, Response, request
import cv2
import numpy as np
import threading

app = Flask(__name__)

latest_frame = None
lock = threading.Lock()

@app.route('/upload', methods=['POST'])
def upload_frame():
    global latest_frame

    file = request.files['frame']
    frame_bytes = file.read()

    np_arr = np.frombuffer(frame_bytes, np.uint8)
    frame = cv2.imdecode(np_arr, cv2.IMREAD_COLOR)

    with lock:
        latest_frame = frame

    return "OK", 200

def generate_frames():
    global latest_frame

    while True:
        with lock:
            if latest_frame is None:
                continue
            ret, buffer = cv2.imencode('.jpg', latest_frame)
            frame = buffer.tobytes()

        yield (b'--frame\r\n'
               b'Content-Type: image/jpeg\r\n\r\n' +
               frame + b'\r\n')

@app.route('/video')
def video_feed():
    return Response(generate_frames(),
                    mimetype='multipart/x-mixed-replace; boundary=frame')

@app.route('/')
def index():
    return """
    <html>
        <body>
            <h2>Drone Streaming</h2>
            <img src="/video" width="800">
        </body>
    </html>
    """

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000, threaded=True)
```

---

## 5. ì‹¤í–‰ ìˆœì„œ

### â‘  ì„œë²„ ì‹¤í–‰

```bash
python server.py
```

### â‘¡ ë“œë¡ (ì†¡ì‹ ) ì‹¤í–‰

```bash
python drone_sender.py
```

### â‘¢ ë¸Œë¼ìš°ì € ì ‘ì†

```
http://ì„œë²„IP:5000
```

---

## 6. í˜„ì¬ ë°©ì‹ì˜ íŠ¹ì§•

| í•­ëª©     | ì„¤ëª…           |
| ------ | ------------ |
| êµ¬í˜„ ë‚œì´ë„ | ë§¤ìš° ë‚®ìŒ        |
| ì§€ì—°     | ì•½ê°„ ìˆìŒ        |
| ì•ˆì •ì„±    | êµìœ¡/PoC ì í•©    |
| ëŒ€ì—­í­    | í”„ë ˆì„ë‹¹ HTTP ìš”ì²­ |

---

## 7. ì‹¤ë¬´ í™•ì¥ ì‹œ ê°œì„  í¬ì¸íŠ¸

* FPS ì œí•œ (`time.sleep(0.03)`)
* ì¸ì¦ í† í° ì¶”ê°€
* RTSP / WebRTC ì „í™˜
* YOLO ê°ì²´ ì¸ì‹ ì„œë²„ ì—°ë™
* ë‹¤ì¤‘ ë“œë¡  ID êµ¬ë¶„

---

## 8. ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ

ì›í•˜ì‹œë©´ ë°”ë¡œ ì´ì–´ì„œ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ **ì½”ë“œê¹Œì§€ í¬í•¨í•˜ì—¬** ì œê³µí•˜ê² ìŠµë‹ˆë‹¤.

1. ë“œë¡  ì˜ìƒ + **ê°ì²´ ì¸ì‹(YOLO)**
2. **ë‹¤ì¤‘ ë“œë¡ ** ë™ì‹œ ì ‘ì† êµ¬ì¡°
3. **RTSP ê¸°ë°˜** ì „ì†¡ êµ¬ì¡°
4. **AWS EC2 ë°°í¬** êµ¬ì„±
5. ì‹¤ì œ **DJI / PX4 ì—°ë™ ë°©ì‹**

í•„ìš” ìš©ë„(êµìœ¡ / ì‹¤ë¬´ / ì—°êµ¬)ë¥¼ ì•Œë ¤ì£¼ì‹œë©´ ê·¸ì— ë§ê²Œ ìµœì í™”í•˜ê² ìŠµë‹ˆë‹¤.
