# 일별 실습 

5일간의 커리큘럼에 맞춰, 각 단계의 핵심이 되는 파이썬 예제 코드를 정리해 드립니다. 이 코드들은 각 개념의 '정석'에 해당하는 구조로 작성되었습니다.

---

## 🗓️ 1일차: 기본 TCP Echo 서버 & 클라이언트

가장 기초가 되는 Blocking 방식의 소켓 통신입니다.

**서버 (server.py)**

```python
import socket

# AF_INET: IPv4, SOCK_STREAM: TCP
with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
    s.bind(('127.0.0.1', 9999))
    s.listen()
    print("서버가 시작되었습니다. 연결을 기다립니다...")
    
    conn, addr = s.accept()
    with conn:
        print(f"연결됨: {addr}")
        while True:
            data = conn.recv(1024)
            if not data: break
            print(f"받은 데이터: {data.decode()}")
            conn.sendall(data) # 받은 데이터를 그대로 다시 전송

```

---

## 🗓️ 2일차: UDP를 이용한 데이터 전송

연결 과정(accept/connect) 없이 바로 데이터를 전송하는 방식입니다.

**UDP 전송 (udp_sender.py)**

```python
import socket

target_ip = "127.0.0.1"
target_port = 9998

with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s:
    msg = "UDP는 빠르고 간결합니다!"
    s.sendto(msg.encode(), (target_ip, target_port))
    print(f"데이터 전송 완료 -> {target_ip}:{target_port}")

```

---

## 🗓️ 3일차: `asyncio`를 활용한 비동기 다중 접속 서버

실무에서 고성능 서버를 구축할 때 가장 선호되는 방식입니다.

**비동기 서버 (async_server.py)**

```python
import asyncio

async def handle_echo(reader, writer):
    addr = writer.get_extra_info('peername')
    print(f"{addr}로부터 연결됨")

    while True:
        data = await reader.read(100)
        if not data: break
        
        message = data.decode()
        print(f"수신: {message}")
        
        writer.write(data)
        await writer.drain() # 네트워크 버퍼가 비워질 때까지 대기

    print("연결 종료")
    writer.close()
    await writer.wait_closed()

async def main():
    server = await asyncio.start_server(handle_echo, '127.0.0.1', 8888)
    async with server:
        await server.serve_forever()

asyncio.run(main())

```

---

## 🗓️ 4일차: `requests`를 이용한 HTTP 통신

웹 프로토콜을 다루는 가장 대중적인 방법입니다.

**HTTP 클라이언트 (http_client.py)**

```python
import requests

# JSONPlaceholder라는 테스트용 API 사용
response = requests.get('https://jsonplaceholder.typicode.com/posts/1')

if response.status_code == 200:
    data = response.json()
    print(f"제목: {data['title']}")
    print(f"본문: {data['body']}")
else:
    print(f"에러 발생: {response.status_code}")

```

---

## 🗓️ 5일차: Scapy를 이용한 패킷 스니핑 (심화)

네트워크 계층의 패킷을 직접 들여다보는 실습입니다. (*관리자 권한 필요*)

**패킷 분석 (sniffer.py)**

```python
from scapy.all import sniff

def packet_callback(packet):
    # IP 계층이 있는 패킷만 출력
    if packet.haslayer('IP'):
        src_ip = packet['IP'].src
        dst_ip = packet['IP'].dst
        print(f"IP 패킷 감지: {src_ip} -> {dst_ip}")

print("패킷 스니핑을 시작합니다... (Ctrl+C로 종료)")
sniff(prn=packet_callback, count=10)

```

---

### 💡 실행 시 주의사항

1. **순서:** 서버 코드를 먼저 실행한 후, 클라이언트 코드를 실행해야 합니다.
2. **포트:** 이미 사용 중인 포트라면 번호를 변경해서 테스트하세요 (예: 9999 -> 8888).
3. **Scapy:** 5일차 실습을 위해서는 `pip install scapy`가 필요하며, Windows의 경우 Npcap 설치가 선행되어야 합니다.

혹시 특정 일차의 코드를 더 확장(예: 파일 전송 기능 추가, GUI 채팅창 추가 등)하고 싶으신 부분이 있나요? 바로 도와드릴 수 있습니다.
