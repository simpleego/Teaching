# ë„¤ì´ë²„ì–¼êµ´ì¸ì‹  
> ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ CLOVA ì–¼êµ´ ì¸ì‹(CFR) APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> **ë§¤ìš° ì¤‘ìš”í•œ ë³´ì•ˆ ì‚¬í•­**ì´ ìˆìŠµë‹ˆë‹¤.

API í˜¸ì¶œì— í•„ìš”í•œ ì¸ì¦ í‚¤(`Client ID`, `Client Secret`)ëŠ” ì ˆëŒ€ ë¸Œë¼ìš°ì €(í”„ë¡ íŠ¸ì—”ë“œ) ì½”ë“œì— ë…¸ì¶œë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤. ë§Œì•½ ë…¸ì¶œë˜ë©´ ëˆ„êµ¬ë‚˜ ë‚´ í‚¤ë¥¼ ê°€ì ¸ë‹¤ ë¬´ë‹¨ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë”°ë¼ì„œ ê°€ì¥ ì•ˆì „í•˜ê³  ì˜¬ë°”ë¥¸ ë°©ë²•ì€ **ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €(í´ë¼ì´ì–¸íŠ¸)ê°€ ì§ì ‘ ë„¤ì´ë²„ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì—¬ëŸ¬ë¶„ì´ ë§Œë“  ë°±ì—”ë“œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³ , ê·¸ ì„œë²„ê°€ ë„¤ì´ë²„ APIë¥¼ ëŒ€ì‹  í˜¸ì¶œí•œ í›„ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¡œ ì „ë‹¬**í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

ì•„ë˜ ì˜ˆì œëŠ” ì´ ì•ˆì „í•œ êµ¬ì¡°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ \*\*í”„ë¡ íŠ¸ì—”ë“œ(HTML/JS)\*\*ì™€ **ë°±ì—”ë“œ(Node.js)** ì½”ë“œë¥¼ í•¨ê»˜ ë³´ì—¬ì¤ë‹ˆë‹¤.

-----

### \#\# ğŸ”’ ì•ˆì „í•œ í˜¸ì¶œ ë°©ì‹: í´ë¼ì´ì–¸íŠ¸ â†” ì„œë²„ â†” ë„¤ì´ë²„ API

1.  **í´ë¼ì´ì–¸íŠ¸ (ğŸ–¼ï¸ ë¸Œë¼ìš°ì €)**: ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê³  'ì–¼êµ´ ë¶„ì„' ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.
2.  **í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„**: ë¸Œë¼ìš°ì €ëŠ” ì´ë¯¸ì§€ë¥¼ **ìš°ë¦¬ì˜ ë°±ì—”ë“œ ì„œë²„**ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
3.  **ì„œë²„ (ğŸ–¥ï¸ Node.js)**: ë°±ì—”ë“œ ì„œë²„ê°€ ì´ë¯¸ì§€ë¥¼ ë°›ìŠµë‹ˆë‹¤.
4.  **ì„œë²„ â†’ ë„¤ì´ë²„ API (â˜ï¸ CLOVA)**: ë°±ì—”ë“œ ì„œë²„ëŠ” **ìˆ¨ê²¨ë‘” API í‚¤**ë¥¼ ì‚¬ìš©í•˜ì—¬ ë„¤ì´ë²„ CLOVA ì–¼êµ´ ì¸ì‹ APIë¡œ ì´ë¯¸ì§€ë¥¼ ì „ë‹¬í•˜ê³  ë¶„ì„ì„ ìš”ì²­í•©ë‹ˆë‹¤.
5.  **ë„¤ì´ë²„ API â†’ ì„œë²„**: ë„¤ì´ë²„ APIê°€ ë¶„ì„ ê²°ê³¼ë¥¼ ë°±ì—”ë“œ ì„œë²„ë¡œ ë³´ë‚´ì¤ë‹ˆë‹¤.
6.  **ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸**: ë°±ì—”ë“œ ì„œë²„ëŠ” ë°›ì€ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ë¸Œë¼ìš°ì €ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
7.  **í´ë¼ì´ì–¸íŠ¸**: ë¸Œë¼ìš°ì €ëŠ” ìµœì¢… ê²°ê³¼ë¥¼ í™”ë©´ì— í‘œì‹œí•©ë‹ˆë‹¤.

-----

### \#\# ğŸ“ ì˜ˆì œ ì½”ë“œ

ì´ ì˜ˆì œë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

#### **1. ë°±ì—”ë“œ ì¤€ë¹„ (Node.js & Express)**

ë¨¼ì € í”„ë¡œì íŠ¸ í´ë”ë¥¼ ë§Œë“¤ê³  í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
mkdir clova-face-api-example
cd clova-face-api-example
npm init -y
npm install express multer node-fetch
```

  - **express**: ì›¹ ì„œë²„ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í”„ë ˆì„ì›Œí¬
  - **multer**: ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì‰½ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬
  - **node-fetch**: Node.js í™˜ê²½ì—ì„œ fetch APIë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

ì´ì œ `server.js` íŒŒì¼ì„ ìƒì„±í•˜ê³  ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

**`server.js` (ë°±ì—”ë“œ ì„œë²„)**

```javascript
const express = require('express');
const multer = require('multer');
const fetch = require('node-fetch');
const FormData = require('form-data');
const fs = require('fs');

const app = express();
const upload = multer({ storage: multer.memoryStorage() }); // íŒŒì¼ì„ ë©”ëª¨ë¦¬ì— ì €ì¥

// ì¤‘ìš”! ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” í™˜ê²½ ë³€ìˆ˜(process.env) ë“±ì„ ì‚¬ìš©í•´ í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
const CLIENT_ID = 'YOUR_CLIENT_ID';       // ë„¤ì´ë²„ í´ë¼ìš°ë“œ í”Œë«í¼ì—ì„œ ë°œê¸‰ë°›ì€ Client ID
const CLIENT_SECRET = 'YOUR_CLIENT_SECRET'; // ë„¤ì´ë²„ í´ë¼ìš°ë“œ í”Œë«í¼ì—ì„œ ë°œê¸‰ë°›ì€ Client Secret

// í”„ë¡ íŠ¸ì—”ë“œ HTML íŒŒì¼ì„ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•œ ì„¤ì •
app.use(express.static('public'));

// ì–¼êµ´ ë¶„ì„ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸
app.post('/api/detect-face', upload.single('image'), async (req, res) => {
  if (!req.file) {
    return res.status(400).json({ error: 'ì´ë¯¸ì§€ íŒŒì¼ì´ í•„ìš”í•©ë‹ˆë‹¤.' });
  }

  try {
    const api_url = 'https://naveropenapi.apigw.ntruss.com/vision/v1/face';
    
    // ë„¤ì´ë²„ APIë¡œ ë³´ë‚¼ FormData ìƒì„±
    const formData = new FormData();
    formData.append('image', req.file.buffer, { filename: 'image.jpg', contentType: req.file.mimetype });

    const response = await fetch(api_url, {
      method: 'POST',
      headers: {
        'X-NCP-APIGW-API-KEY-ID': CLIENT_ID,
        'X-NCP-APIGW-API-KEY': CLIENT_SECRET,
        ...formData.getHeaders()
      },
      body: formData,
    });

    const data = await response.json();
    res.json(data);

  } catch (error) {
    console.error('API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
    res.status(500).json({ error: 'ì„œë²„ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });
  }
});

const PORT = 3000;
app.listen(PORT, () => {
  console.log(`ì„œë²„ê°€ http://localhost:${PORT} ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.`);
});
```

#### **2. í”„ë¡ íŠ¸ì—”ë“œ ì¤€ë¹„ (HTML & JavaScript)**

`clova-face-api-example` í´ë” ì•ˆì— `public` í´ë”ë¥¼ ë§Œë“¤ê³ , ê·¸ ì•ˆì— `index.html` íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”.

**`public/index.html` (í”„ë¡ íŠ¸ì—”ë“œ)**

```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>CLOVA ì–¼êµ´ ì¸ì‹ API ì˜ˆì œ</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    #results { margin-top: 20px; white-space: pre-wrap; background-color: #f4f4f4; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>CLOVA ì–¼êµ´ ì¸ì‹(CFR) JavaScript ì˜ˆì œ</h1>
  <p>ë¶„ì„í•  ì–¼êµ´ ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
  <input type="file" id="imageInput" accept="image/*">
  <button id="submitBtn">ì–¼êµ´ ë¶„ì„í•˜ê¸°</button>

  <h2>ë¶„ì„ ê²°ê³¼:</h2>
  <div id="results">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>

  <script>
    document.getElementById('submitBtn').addEventListener('click', async () => {
      const imageInput = document.getElementById('imageInput');
      const resultsDiv = document.getElementById('results');
      
      if (imageInput.files.length === 0) {
        alert('ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }

      resultsDiv.textContent = 'ë¶„ì„ ì¤‘...';

      const formData = new FormData();
      formData.append('image', imageInput.files[0]);

      try {
        // ë°±ì—”ë“œ ì„œë²„ì˜ API ì—”ë“œí¬ì¸íŠ¸ë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
        const response = await fetch('/api/detect-face', {
          method: 'POST',
          body: formData,
        });

        const data = await response.json();

        // ê²°ê³¼ë¥¼ ì˜ˆì˜ê²Œ í¬ë§·íŒ…í•˜ì—¬ í‘œì‹œí•©ë‹ˆë‹¤.
        resultsDiv.textContent = JSON.stringify(data, null, 2);

      } catch (error) {
        console.error('ì˜¤ë¥˜ ë°œìƒ:', error);
        resultsDiv.textContent = 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.';
      }
    });
  </script>
</body>
</html>
```

-----

### \#\# ğŸš€ ì‹¤í–‰ ë°©ë²•

1.  **API í‚¤ ë°œê¸‰**: ë„¤ì´ë²„ í´ë¼ìš°ë“œ í”Œë«í¼ì—ì„œ **AIÂ·NAVER API**ë¥¼ ì‹ ì²­í•˜ê³  **Application ë“±ë¡** í›„ `Client ID`ì™€ `Client Secret`ì„ ë°œê¸‰ë°›ìœ¼ì„¸ìš”.
2.  **í‚¤ ì…ë ¥**: `server.js` íŒŒì¼ì˜ `YOUR_CLIENT_ID`ì™€ `YOUR_CLIENT_SECRET` ë¶€ë¶„ì„ ë°œê¸‰ë°›ì€ í‚¤ë¡œ êµì²´í•˜ì„¸ìš”.
3.  **ì„œë²„ ì‹¤í–‰**: í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì—¬ ë°±ì—”ë“œ ì„œë²„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
    ```bash
    node server.js
    ```
4.  **í™•ì¸**: ì›¹ ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  `http://localhost:3000` ì£¼ì†Œë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
5.  ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•˜ê³  'ì–¼êµ´ ë¶„ì„í•˜ê¸°' ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¶„ì„ ê²°ê³¼ê°€ JSON í˜•íƒœë¡œ í™”ë©´ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
