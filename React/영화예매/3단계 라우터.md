# 3단계 라우터
다음 3단계에서는 라우팅(Routing) 기능을 추가
네, 알겠습니다. 3단계에서는 \*\*리액트 라우터(React Router)\*\*를 사용하여 여러 페이지를 만들고 페이지 간 이동을 구현해 보겠습니다. 사용자의 요청에 따라, 단순히 라우팅을 구현하는 것을 넘어 리액트 라우터의 유용한 기능들을 활용하여 구조적으로 더 나은 코드를 작성해 보겠습니다.

이번 단계에서는 페이지별로 공통된 레이아웃(헤더, 푸터)을 효율적으로 관리하기 위해 \*\*중첩 라우트(Nested Routes)\*\*와 **`Outlet`** 개념을 도입하겠습니다. 이는 실제 애플리케이션에서 매우 유용하게 사용되는 기능입니다.

-----

### **3단계: React Router로 페이지 이동 기능 구현하기**

**1. React Router 라이브러리 설치**

가장 먼저 페이지 이동 기능을 제공하는 `react-router-dom` 라이브러리를 설치합니다. 터미널을 열고 프로젝트 폴더(`movie-reservation-app`)로 이동한 뒤, 아래 명령어를 실행해주세요.

```bash
npm install react-router-dom
```

**2. 페이지 컴포넌트 생성**

사용자가 이동할 각 페이지에 해당하는 컴포넌트를 만들겠습니다. `src` 폴더 안에 `pages`라는 새 폴더를 만들고, 그 안에 각 페이지 파일을 생성합니다.

```
src/
└── pages/
    ├── Home.js      // 메인 페이지
    ├── Movies.js    // 영화 목록 페이지
    ├── Reserve.js   // 예매 페이지
    └── NotFound.js  // 경로가 잘못되었을 때 보여줄 페이지
```

각 파일에 아래와 같이 간단한 코드를 작성합니다.

#### **Home.js**

```javascript
import React from 'react';

const Home = () => {
  return (
    <div>
      <h1>메인 페이지</h1>
      <p>오신 것을 환영합니다! 상단 메뉴를 통해 이동하세요.</p>
    </div>
  );
};

export default Home;
```

#### **Movies.js**

```javascript
import React from 'react';

const Movies = () => {
  return <h1>영화 목록 페이지</h1>;
};

export default Movies;
```

#### **Reserve.js**

```javascript
import React from 'react';

const Reserve = () => {
  return <h1>영화 예매 페이지</h1>;
};

export default Reserve;
```

#### **NotFound.js**

```javascript
import React from 'react';

const NotFound = () => {
  return <h1>404 - 페이지를 찾을 수 없습니다.</h1>;
};

export default NotFound;
```

**3. 라우터 설정 및 레이아웃 컴포넌트 활용**

이제 라우팅 설정을 해보겠습니다. 먼저, 모든 페이지에 공통으로 들어갈 \*\*`Header`\*\*와 \*\*`Footer`\*\*를 관리하기 위한 `Layout` 컴포넌트를 만들겠습니다.

#### **Layout 컴포넌트 생성**

`src/components` 폴더에 `Layout.js` 파일을 만들고 아래 코드를 작성합니다.

```javascript
import React from 'react';
import { Outlet } from 'react-router-dom';
import Header from './Header/Header';
import Footer from './Footer/Footer';

const Layout = () => {
  return (
    <>
      <Header />
      <main className="main">
        {/* 이 부분에 각 페이지의 콘텐츠가 렌더링됩니다. */}
        <Outlet /> 
      </main>
      <Footer />
    </>
  );
};

export default Layout;
```

  - **`Outlet`**: `react-router-dom`이 제공하는 컴포넌트로, **자식 경로의 컴포넌트가 렌더링될 위치**를 지정해줍니다. `Layout` 컴포넌트를 부모로 하는 자식 경로들이 바로 이 `Outlet` 자리에 나타나게 됩니다.

#### **`App.js` 라우팅 구조 변경**

`src/App.js` 파일을 열어 기존 코드를 모두 지우고, 아래와 같이 라우팅 설정을 위한 코드로 변경합니다.

```javascript
import React from 'react';
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import './App.css';

import Layout from './components/Layout';
import Home from './pages/Home';
import Movies from './pages/Movies';
import Reserve from './pages/Reserve';
import NotFound from './pages/NotFound';

function App() {
  return (
    <BrowserRouter>
      <Routes>
        {/* Layout 컴포넌트를 부모 경로로 설정 */}
        <Route path="/" element={<Layout />}>
          {/* 자식 경로들: index는 부모 경로와 동일한 경로를 의미 */}
          <Route index element={<Home />} /> 
          <Route path="movies" element={<Movies />} />
          <Route path="reserve" element={<Reserve />} />
        </Route>
        
        {/* 위에서 정의되지 않은 모든 경로는 NotFound 페이지로 연결 */}
        <Route path="*" element={<NotFound />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;
```

  - **`BrowserRouter`**: HTML5의 History API를 사용하여 UI를 URL과 동기화하는 라우터입니다. 앱 전체를 감싸줍니다.
  - **`Routes`**: 여러 `Route` 컴포넌트를 감싸는 역할이며, 현재 URL과 가장 일치하는 첫 번째 `Route`를 렌더링합니다.
  - **`Route`**: 특정 경로(`path`)에 어떤 컴포넌트(`element`)를 보여줄지 정의합니다.
  - **중첩 라우트 구조**: `<Route path="/" element={<Layout />}>` 안에 다른 `Route`들을 자식으로 넣어, `/`, `/movies`, `/reserve` 경로 모두 `Layout` 컴포넌트(헤더, 푸터)를 공유하게 만들었습니다. `index` prop은 부모 경로와 정확히 일치할 때 렌더링될 컴포넌트를 지정합니다.

**4. `Header`의 링크 수정**

마지막으로, `Header` 컴포넌트의 일반 `<a>` 태그를 `react-router-dom`의 **`Link`** 컴포넌트로 변경해야 합니다. `Link` 컴포넌트는 페이지를 새로고침하지 않고 클라이언트 사이드에서 페이지를 전환해주어 훨씬 부드러운 사용자 경험을 제공합니다.

`src/components/Header/Header.js` 파일을 아래와 같이 수정합니다.

```javascript
import React from 'react';
import { Link } from 'react-router-dom'; // Link 컴포넌트 import
import './Header.css';

const Header = () => {
  return (
    <header className="header">
      <div className="logo">
        <Link to="/">영화 예매 사이트</Link> {/* a 태그를 Link로 변경 */}
      </div>
      <nav className="nav">
        <ul>
          <li><Link to="/movies">영화</Link></li> {/* a 태그를 Link로 변경 */}
          <li><Link to="/reserve">예매</Link></li> {/* a 태그를 Link로 변경 */}
          {/* 로그인 기능은 나중에 구현 예정 */}
          <li><a href="#!">로그인</a></li> 
        </ul>
      </nav>
    </header>
  );
};

export default Header;
```

**5. 실행 결과 확인**

다시 개발 서버(`npm start`)를 실행하고 웹 브라우저를 확인해보세요.

  - 상단 메뉴의 '영화', '예매' 링크를 클릭하면 페이지 전체가 새로고침되지 않고 **메인 콘텐츠 영역만 부드럽게 바뀌는 것**을 볼 수 있습니다.
  - 주소창에 `http://localhost:3000/invalid-url` 처럼 존재하지 않는 주소를 입력하면 "404 - 페이지를 찾을 수 없습니다." 메시지가 나타납니다.

-----

이제 3단계가 완료되었습니다. 페이지 이동을 위한 기본적인 라우팅 구조가 완성되었습니다. 다음 4단계에서는 **영화 목록 페이지(`Movies.js`)에 실제 영화 데이터를 표시하고, 각 영화 포스터를 클릭하면 상세 정보 페이지로 이동하는 동적 라우팅(Dynamic Routing)** 기능을 구현해 보겠습니다. 계속 진행할까요?
