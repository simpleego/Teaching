# 4단계 영화목록 동적라우팅.md
> 4단계에서는 **영화 목록 페이지를 만들고, 각 영화를 클릭했을 때 해당 영화의 상세 정보 페이지로 이동하는 동적 라우팅(Dynamic Routing)** 기능을 구현하겠습니다.

이를 위해 실제 영화 데이터처럼 보이는 **목업(mock) 데이터**를 만들고, 리액트 라우터의 **`useParams`** 훅을 사용하여 URL의 특정 값을 파라미터로 받아오는 방법을 학습해 보겠습니다.

-----

### **4단계: 영화 목록 표시 및 동적 라우팅 구현**

**1. 목업(Mock) 영화 데이터 생성**

실제 API를 연동하기 전에, 임시로 사용할 영화 데이터를 만들어 보겠습니다. `src` 폴더에 `data`라는 새 폴더를 만들고, 그 안에 `movies.js` 파일을 생성한 뒤 아래 코드를 입력합니다.

```
src/
└── data/
    └── movies.js
```

#### **`src/data/movies.js`**

```javascript
export const movies = [
  {
    id: 1,
    title: "웡카",
    poster: "https://via.placeholder.com/200x300.png?text=Wonka", // 임시 포스터 이미지
    genre: "판타지, 드라마",
    director: "폴 킹",
    releaseDate: "2024-01-31",
    description: "세상에서 가장 달콤한 여정, 좋은 일은 모두 꿈에서부터 시작된다!"
  },
  {
    id: 2,
    title: "시민덕희",
    poster: "https://via.placeholder.com/200x300.png?text=Citizen+of+a+Kind",
    genre: "드라마",
    director: "박영주",
    releaseDate: "2024-01-24",
    description: "내 돈은 내가 잡는다! 보이스피싱범을 잡기 위한 평범한 시민의 통쾌한 추적극."
  },
  {
    id: 3,
    title: "외계+인 2부",
    poster: "https://via.placeholder.com/200x300.png?text=Alienoid:Part2",
    genre: "SF, 액션",
    director: "최동훈",
    releaseDate: "2024-01-10",
    description: "마침내 모든 것을 되찾기 위한 시간의 문이 열린다."
  },
];
```

  * `via.placeholder.com`은 개발 단계에서 임시 이미지를 쉽게 만들어 쓸 수 있는 유용한 서비스입니다.

**2. 영화 목록 페이지(`Movies.js`) 수정**

이제 `src/pages/Movies.js` 파일을 수정하여 위에서 만든 목업 데이터를 화면에 표시하겠습니다.

```javascript
import React from 'react';
import { Link } from 'react-router-dom';
import { movies } from '../data/movies'; // 목업 데이터 import
import './Movies.css'; // CSS 파일 import

const Movies = () => {
  return (
    <div>
      <h1>영화 목록</h1>
      <div className="movie-list">
        {movies.map(movie => (
          <div key={movie.id} className="movie-item">
            <Link to={`/movies/${movie.id}`}>
              <img src={movie.poster} alt={movie.title} />
              <h3>{movie.title}</h3>
            </Link>
          </div>
        ))}
      </div>
    </div>
  );
};

export default Movies;
```

  - `movies.map()`: `movies` 배열을 순회하며 각 영화 정보를 `div` 요소로 변환합니다.
  - **`key={movie.id}`**: 리액트가 배열을 렌더링할 때 각 항목을 효율적으로 식별하고 업데이트하기 위해 고유한 `key` prop이 필요합니다.
  - **`<Link to={'/movies/${movie.id}'}>`**: **동적 라우팅의 핵심**입니다. 각 영화 포스터를 클릭하면 `/movies/1`, `/movies/2` 와 같이 해당 영화의 `id`를 포함한 경로로 이동하도록 `Link`를 설정합니다.

`src/pages/` 폴더에 `Movies.css` 파일을 새로 만들고 아래 스타일 코드를 추가합니다.

#### **`src/pages/Movies.css`**

```css
.movie-list {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  justify-content: center;
  padding: 20px;
}

.movie-item {
  width: 200px;
  text-align: center;
}

.movie-item img {
  width: 100%;
  height: 300px;
  object-fit: cover;
  border-radius: 8px;
  transition: transform 0.2s;
}

.movie-item img:hover {
  transform: scale(1.05);
}

.movie-item h3 {
  margin-top: 10px;
  font-size: 1.1rem;
}

/* Link 태그의 기본 스타일 제거 */
.movie-item a {
  text-decoration: none;
  color: inherit;
}
```

**3. 영화 상세 페이지 컴포넌트 생성**

각 영화의 상세 정보를 보여줄 `MovieDetail.js` 컴포넌트를 `src/pages/` 폴더에 생성합니다.

#### **`src/pages/MovieDetail.js`**

```javascript
import React from 'react';
import { useParams } from 'react-router-dom';
import { movies } from '../data/movies';
import './MovieDetail.css';

const MovieDetail = () => {
  const { movieId } = useParams(); // URL 파라미터 가져오기
  const movie = movies.find(m => m.id === parseInt(movieId));

  if (!movie) {
    return <div>해당 영화를 찾을 수 없습니다.</div>;
  }

  return (
    <div className="movie-detail-container">
      <img src={movie.poster} alt={movie.title} className="movie-detail-poster" />
      <div className="movie-detail-info">
        <h1>{movie.title}</h1>
        <p><strong>장르:</strong> {movie.genre}</p>
        <p><strong>감독:</strong> {movie.director}</p>
        <p><strong>개봉일:</strong> {movie.releaseDate}</p>
        <p>{movie.description}</p>
      </div>
    </div>
  );
};

export default MovieDetail;
```

  - **`useParams()`**: 리액트 라우터가 제공하는 훅(Hook)으로, URL의 파라미터 값을 객체 형태로 가져옵니다. 예를 들어 URL이 `/movies/1` 이라면, `useParams()`는 `{ movieId: '1' }`을 반환합니다. (파라미터 이름은 잠시 후 `App.js`에서 설정할 것입니다.)
  - **`movies.find(...)`**: `movies` 배열에서 URL 파라미터의 `movieId`와 일치하는 `id`를 가진 영화 객체를 찾습니다. `useParams`로 받은 `movieId`는 문자열이므로 `parseInt()`를 사용해 숫자로 변환 후 비교합니다.

`src/pages/` 폴더에 `MovieDetail.css` 파일을 새로 만들고 아래 스타일 코드를 추가합니다.

#### **`src/pages/MovieDetail.css`**

```css
.movie-detail-container {
  display: flex;
  gap: 30px;
  padding: 40px;
  justify-content: center;
  align-items: flex-start;
}

.movie-detail-poster {
  width: 300px;
  height: auto;
  border-radius: 8px;
}

.movie-detail-info {
  max-width: 600px;
  text-align: left;
}

.movie-detail-info h1 {
  margin-top: 0;
}
```

**4. `App.js` 라우팅 설정 추가**

마지막으로 `src/App.js` 파일에 영화 상세 페이지로 이동할 수 있는 동적 경로를 추가해줍니다.

```javascript
// ... 다른 import 구문들
import MovieDetail from './pages/MovieDetail'; // MovieDetail 컴포넌트 import

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Layout />}>
          <Route index element={<Home />} />
          <Route path="movies" element={<Movies />} />
          {/* 동적 라우트 추가 */}
          <Route path="movies/:movieId" element={<MovieDetail />} />
          <Route path="reserve" element={<Reserve />} />
        </Route>
        
        <Route path="*" element={<NotFound />} />
      </Routes>
    </BrowserRouter>
  );
}

export default App;
```

  - **`<Route path="movies/:movieId" ... />`**: **동적 세그먼트**를 설정하는 부분입니다. 여기서 `:movieId`는 "movieId"라는 이름의 파라미터를 의미합니다. 이 자리에 어떤 값이든 올 수 있으며, `useParams` 훅은 이 값을 `movieId`라는 키로 가져옵니다.

**5. 실행 결과 확인**

개발 서버(`npm start`)를 다시 실행하고, 상단 메뉴에서 '영화'를 클릭하여 영화 목록 페이지로 이동합니다.

  - 목록에 있는 영화 포스터 중 하나를 클릭하면, 주소창이 `/movies/1` 과 같이 변경됩니다.
  - 화면에는 해당 영화의 상세 정보가 멋지게 표시되는 것을 확인할 수 있습니다.

-----

이제 4단계가 완료되었습니다. 영화 데이터를 화면에 목록으로 보여주고, 동적 라우팅을 통해 각 영화의 상세 페이지까지 구현했습니다.

다음 마지막 5단계에서는 \*\*상태 관리(State Management)\*\*의 기초를 배우고, **예매 페이지에서 좌석 선택 기능을 간단하게 구현**해 보겠습니다. 이 과정에서 리액트의 핵심 기능인 **`useState`** 훅을 사용하게 됩니다. 계속 진행할까요?
